const NonceValue = "rdsystem2020";
const LogoutProtect = false;

const ColorSignNo = "#00139f";
const ColorOwner = "#00139f";
const BgColorOwner = "#eff0ff";
const ColorRelease = "#505050";
const ColorCancel = "#be0000";
const ColorLock = "#860954";
const BgColorLock = "#f3ebeb";

var restlocactiva = decodeURIComponent(getCookie("restlocactiva"));
var vusrnm = getCookie("usrnm");
var vtoken = getCookie("token");
let Ucrypt = new Encryption();
var Udecrypt = Ucrypt.decrypt(EncU, NonceValue);
var Jdecrypt = Ucrypt.decrypt(EncJ, NonceValue);
var Sdecrypt = Ucrypt.decrypt(EncS, NonceValue);
// console.log(EPIC);
// function ListWO() {
//   console.log("MSK");
//   $.ajax({
//     type: "POST",
//     url: `../RND_BackEnd/backend_aktiva/list_no_wo`,
//     headers: {
//       user: vusrnm,
//       token: vtoken,
//     },
//     data: {
//       no_wo: no_wo
//     },
//     cache: false,
//     success: function (response) {
//       var obj = JSON.parse(response);
//       if (obj.status == false) {
//         IsResponseFalse(obj.message);
//       } else {
//         $("#FeedListAppWO").empty();
//         var len = obj.length;
//         for (i = 0; i < len; i++) {
//           var idAk = obj[i]['id'];
//           $("#TableListAppWO").find("tbody").append(
//             "<tr>" +
//             "<td width='100%'>" + obj[i]['nmr_aktiva'] + "</td>" +
//             "<td width='100%'>" + obj[i]['description'] + "</td>" +
//             "<td width='100%' data-tooltip='View Detail' data-inverted='' data-variation='basic'><i class='eye iconcolorblack icon viewdetailmutasi' eid = " + idAk + "></i></td>" +
//             "</tr>"
//           );
//         }

//       }
//     },
//     error: function () {
//       IsTimeOut(LogoutProtect);
//     },
//   });
// }

function LoadDataAktiva(idAktiva) {
  $.ajax({
    type: "POST",
    url: `${restlocactiva}aktiva/load-datawo/` + idAktiva,
    headers: {
      user: vusrnm,
      token: vtoken
    },
    cache: false,
    success: function (data) {
      var obj = JSON.parse(data);
      $('#modalNoAktiva').html(obj.nomor_aktiva);
      $('#modalJenis').html(obj.jenis);
      $('#modalMaterialNumber').html(obj.material_number);
      $('#modalDescription').html(obj.description);
      $('#modalNIK').html(obj.nik);
      $('#modalMerk').html(obj.merk);
      $('#modalPeminta').html(obj.peminta);
      $('#modalVMaterialNumber').html(obj.vendor_material_number);
      $('#modalCostCenter').html(obj.cost_center);
      $('#modalGR').html(obj.gr);
      $('#modalNoSeri').html(obj.no_seri);
      $('#modalGolongan').html(obj.golongan);
      $('#modalCurrency').html(obj.currency);
      $('#modalSatuan').html(obj.satuan);
      $('#modalPrice').html(obj.harga);
      $('#modalVendor').html(obj.vendor);

    },
    error: function () {
      IsTimeOut(LogoutProtect);
    }
  });
}

$("#TableListAppWO").on("click", ".viewdetailmutasi", function () {
  var idAktiva = $(this).attr('eid')
  $('.xwindetailitem').modal('show');
  LoadDataAktiva(idAktiva);
});

function LoadSign() {
  $.ajax({
    type: "POST",
    url: `${restlocactiva}loadDetailSignWO`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    data: {
      no_wo: no_wo
    },
    cache: false,
    success: function (data) {
      var objs = JSON.parse(data);
      var obj = objs['loadSignWO'];
      var objl = objs['listNoWO'];
      console.log(obj);
      if (obj.status === false) {
        IsResponseFalse(obj.message);
        $("#FeedListAppWO").empty();
        var len = objl.length;
        for (i = 0; i < len; i++) {
          var idAk = objl[i]['id'];
          $("#TableListAppWO").find("tbody").append(
            "<tr>" +
            "<td width='100%'>" + objl[i]['nmr_aktiva'] + "</td>" +
            "<td width='100%'>" + objl[i]['description'] + "</td>" +
            "<td width='100%' data-tooltip='View Detail' data-inverted='' data-variation='basic'><i class='eye iconcolorblack icon viewdetailmutasi' eid = " + idAk + "></i></td>" +
            "</tr>"
          );
        }
        if(objs['loadCancelWO'].status !== false ){
          $('.messagecancel').text("Permintaan Approval Write Off ini di "+objs['loadCancelWO'][0]['type']+" oleh "+objs['loadCancelWO'][0]['pic']+" pada tanggal "+objs['loadCancelWO'][0]['date']+" karena "+objs['loadCancelWO'][0]['reason']);
        }
      } else {
        // console.log(objs['loadCancelWO']);
        if(objs['loadCancelWO'].status !== false ){
          $('.messagecancel').text("Permintaan Approval Write Off ini di "+objs['loadCancelWO'][0]['type']+" oleh "+objs['loadCancelWO'][0]['pic']+" pada tanggal "+objs['loadCancelWO'][0]['date']+" karena "+objs['loadCancelWO'][0]['reason']);
        
        }
        $("#FeedListAppWO").empty();
        var len = objl.length;
        for (i = 0; i < len; i++) {
          var idAk = objl[i]['id'];
          $("#TableListAppWO").find("tbody").append(
            "<tr>" +
            "<td width='100%'>" + objl[i]['nmr_aktiva'] + "</td>" +
            "<td width='100%'>" + objl[i]['description'] + "</td>" +
            "<td width='100%' data-tooltip='View Detail' data-inverted='' data-variation='basic'><i class='eye iconcolorblack icon viewdetailmutasi' eid = " + idAk + "></i></td>" +
            "</tr>"
          );
        }

        if(obj.pic_signby !== null){
          if(obj.pic_name === obj.pic_signby){
            $('#Pic').text(obj.pic_name);
          }
          else{
            $('#Pic').text(obj.pic_name+" a.n.  Signed By  "+obj.pic_signby);
          }
        }
        else{
          $('#Pic').text(obj.pic_name);
        }
        $('#PicJabatan').text(obj.pic_jabatan);
        $('#PicBagian').text(obj.bagian_pic);
        if (vusrnm === obj.pic_username) {
          if (obj.pic_sign === "SIGNED") {
            $('#DateSignPic').text(obj.datesign_pic);
            $('#BtnSignPic').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Signed" data-position="top left">SIGNED</a>');
          } else {
            $('#BtnSignPic').html('<a class="ui tiny bottom green attached button signpic" asid="MD1" data-tooltip="Sign setelah melengkapi data" data-position="top left">SIGN</a>');
          }
        } else {
          if (obj.pic_sign === "SIGNED") {
            $('#DateSignAdmin').text(obj.datesign_pic);
            $('#BtnSignPic').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Signed" data-position="top left">SIGNED</a>');
          } else {
            console.log(obj.rnd_bagian_pic+" "+Sdecrypt);
            if ((obj.rnd_bagian_pic === Sdecrypt && Jdecrypt == "HEAD OF") || EPic === "ADMCOSTCENTER") {
              $('#BtnSignPic').html('<a class="ui tiny bottom violet attached button signpic" asid="MD1" data-tooltip="Sign setelah melengkapi data" data-position="top left">a.n. SIGN</a>');
            } else {
              $('#BtnSignPic').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">SIGN</a>');
            }
          }
        }

        if (obj.head_of_pic) {
          if(obj.head_of_pic_signby !== null){
            if(obj.head_of_pic === obj.head_of_pic_signby){
              $('#HeadOf').text(obj.head_of_pic);
            }
            else if(obj.head_of_picby !== obj.head_of_pic_signby){
              $('#HeadOf').text(obj.head_of_pic+" a.n.  Signed By  "+obj.head_of_pic_signby);
            }
          }
          else{
            $('#HeadOf').text(obj.head_of_pic);
          }
          $('#HeadOfJabatan').text(obj.head_of_jabatan);
          $('#HeadOfBagian').text(obj.bagian_head_of_pic);
          if (obj.pic_sign === "SIGNED") {
            if (vusrnm === obj.head_of_pic_username) {
              if (obj.head_of_pic_sign === "SIGNED") {
                $('#DateSignHeadOf').text(obj.datesign_head_of);
                $('#BtnSignHeadOf').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">APPROVED</a>');
              } else {
                $('#BtnSignHeadOf').html('<div class="ui tiny two bottom attached buttons"><div class="ui green button signho" asid="app1" data-tooltip="Confirm Activa" data-position="top left">APPROVE</div><div class="ui redreject button rejectapp" asid="Head of" data-tooltip="Reject Approval" data-position="top left">Reject</div></div>');
                EnSign();
              }
            } else {
              if (obj.head_of_pic_sign === "SIGNED") {
                $('#DateSignHeadOf').text(obj.datesign_head_of);
                $('#BtnSignHeadOf').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Confirmed" data-position="top left">APPROVED</a>');
              } else {
                if (obj.rnd_bagian_head_of === Sdecrypt && Jdecrypt == "HEAD OF") {
                  $('#BtnSignHeadOf').html('<div class="ui tiny two bottom attached buttons"><div class="ui violet button signho" asid="app1" data-tooltip="Confirm Activa" data-position="top left">a.n. APPROVE</div><div class="ui redreject button rejectapp" asid="Head of" data-tooltip="Reject Approval" data-position="top left">Reject</div></div>');
                  EnSign();
                } else {
                  $('#BtnSignHeadOf').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">APPROVE</a>');
                }
              }
            }
          } else {
            if (obj.head_of_pic_sign === "SIGNED") {
              $('#DateSignHeadOf').text(obj.datesign_head_of);
              $('#BtnSignHeadOf').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Confirmed" data-position="top left">APPROVED</a>');
            } else {
              $('#BtnSignHeadOf').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">APPROVE</a>');
            }
          }
        }

        if (obj.admin && obj.head_of_pic_sign === "SIGNED") {
          $('#GenAdmin').text(obj.admin);
          $('#GenAdminJabatan').text(obj.admin_jabatan);
          $('#GenAdminBagian').text(obj.bagian_admin);
          if (vusrnm === obj.admin_username) {
            if (obj.admin_sign === "SIGNED") {
              $('#DateSignAdmin').text(obj.datesign_admin);
              $('#BtnSignAdmin').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Signed" data-position="top left">SIGNED</a>');
            } else {
              $('#BtnSignAdmin').html('<a class="ui tiny bottom green attached button signadmin" asid="MD1" data-tooltip="Sign setelah melengkapi data" data-position="top left">SIGN</a>');
            }
          } else {
            if (obj.admin_sign === "SIGNED") {
              $('#DateSignAdmin').text(obj.datesign_admin);
              $('#BtnSignAdmin').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Signed" data-position="top left">SIGNED</a>');
            } else {
              if (obj.rnd_bagian_admin === Sdecrypt && Jdecrypt == "HEAD OF") {
                $('#BtnSignAdmin').html('<a class="ui tiny bottom violet attached button signadmin" asid="MD1" data-tooltip="Sign setelah melengkapi data" data-position="top left">a.n. SIGN</a>');
              } else {
                $('#BtnSignAdmin').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">SIGN</a>');
              }
            }
          }
        }



        SignGenAdmin();
        SignPIC();
        SignHo();
        // SignHoDQAReg();
        // SignPicDQAReg();
        RejectApp();

      }


    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
}

function SignGenAdmin() {
  $(".signadmin").on("click", function () {
    var dlink = Ucrypt.encrypt(no_wo, NonceValue);
    Swal.fire({
      title: "<h3>Apakah sudah yakin untuk Write Off aktiva ini?</h3>",
      confirmButtonText: "Ya",
      showCancelButton: true,
    }).then((result) => {
      if (result.value) {
        $.ajax({
          type: "POST",
          url: `../RND_BackEnd/backend_aktiva/sign-genadmin-wo`,
          headers: {
            user: vusrnm,
            token: vtoken,
          },
          data: {
            noWO: no_wo,
            dlink: 'aktivaSignApprovalWriteoff&n=' + dlink,
            user: Udecrypt
          },
          cache: false,
          success: function (response) {
            var obj = JSON.parse(response);
            if (obj.status == false) {
              IsResponseFalse(obj.message);
            } else {
              IsResponseTrue(obj.message);
              LoadSign();
            }
          },
          error: function () {
            IsTimeOut(LogoutProtect);
          },
        });
      }
    });
  });
}


function SignPIC() {
  $(".signpic").on("click", function () {
    $(".xwinaddheadof").modal({
      autofocus: false,
    }).modal("show");
    $("#inputPICMutasi").dropdown("clear");

  });
}

// function SignPic(){
$("#SaveDataHO").on("click", function () {
  var ho = $("#HeadOfPic").val();
  var dlink = Ucrypt.encrypt(no_wo, NonceValue);
  $.ajax({
    type: "POST",
    url: `../RND_BackEnd/backend_aktiva/sign-pic-wo`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    data: {
      ho: ho,
      noWO: no_wo,
      dlink: 'aktivaSignApprovalWriteoff&n=' + dlink,
      user: Udecrypt
    },
    cache: false,
    success: function (response) {
      var obj = JSON.parse(response);
      if (obj.status == false) {
        IsResponseFalse(obj.message);
      } else {
        IsResponseTrue(obj.message);
        LoadSign();
        $(".xwinaddheadof").modal("hide");
      }
    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
});
// }

function EnSign() {
  $('.ensign').click(function () {
    // var rl = $(this).attr('rl');
    // var nm = $(this).attr('nm');
    // var hc = $(this).attr('hc');
    $(".xwinaddheadof").modal({
      autofocus: false,
    }).modal("show");
    $("#HeadOfPic").dropdown("clear");
  });
}

function SignHo() {
  $(".signho").on("click", function () {
    var dlink = Ucrypt.encrypt(no_wo, NonceValue);
    Swal.fire({
      title: "<h3>Approve Permintaan Aktiva ini ?</h3>",
      confirmButtonText: "Ya",
      showCancelButton: true,
    }).then((result) => {
      if (result.value) {
        $.ajax({
          type: "POST",
          url: `../RND_BackEnd/backend_aktiva/sign-ho-wo`,
          headers: {
            user: vusrnm,
            token: vtoken,
          },
          data: {
            noWo: no_wo,
            dlink: 'aktivaSignApprovalWriteoff&n=' + dlink,
            user: Udecrypt
          },
          cache: false,
          success: function (response) {
            var obj = JSON.parse(response);
            if (obj.status == false) {
              IsResponseFalse(obj.message);
            } else {
              IsResponseTrue(obj.message);
              LoadSign();
            }
          },
          error: function () {
            IsTimeOut(LogoutProtect);
          },
        });
      }
    });
  });
}

function RejectApp() {
  $(".rejectapp").on("click", function () {
    $(".xwinrejectapp").modal('show');
    var SignAs = $(this).attr("asid");
    $("#asid").val(SignAs);
  });
}

$("#RejectApp").on("click", function (e) {
  var reason = $("#rejectreason").val();
  var asid = $("#asid").val();
  var dlink = Ucrypt.encrypt(no_wo, NonceValue);
  Swal.fire({
    title: "<h3>Reject Permintaan Approval Aktiva ini ?</h3>",
    text: reason,
    icon: "warning",
    confirmButtonText: "Reject!",
    showCancelButton: true,
  }).then((result) => {
    if (result.value) {
      $.ajax({
        type: "POST",
        url: `${restlocactiva}reject_approval_wo`,
        headers: {
          user: vusrnm,
          token: vtoken,
        },
        data: {
          no_wo: no_wo,
          reason: reason,
          asid: asid,
          dlink: 'aktivaSignApprovalWriteoff&n=' + dlink,
          nama: Udecrypt
        },
        cache: false,
        success: function (response) {
          var obj = JSON.parse(response);
          if (obj.status == false) {
            IsResponseFalse(obj.message);
          } else {
            IsResponseTrue(obj.message);
            location.reload();
            LoadSign();
            // window.location.href = "./?link=mkgitem&i=" + IdUrl;
          }
        },
        error: function () {
          if (LogoutProtect) {
            window.location.href = "./?link=loclogout";
          } else {
            Swal.fire("Error", "Server tidak merespon, segera hubungi Administrator di ext. 3553 !", "error");
          }
        },
      });
    }j
  });
});

$('#ViewWOPDF').click(function(){
    
  var sct = getCookie("section");
  var jbt = getCookie("jabatan");
  // console.log(pic);
  $.ajax({
    type    : "POST",
    url     : `../RND_BackEnd/backend_aktiva/load-viewwopdf`,
    headers : {
      user  : vusrnm,
      token : vtoken
    },
    data: {
      no_wo: no_wo
    },
    cache: false,
    success: function (response){
      var obj = JSON.parse(response);
      $(".xwinviewuploadpdfwo").modal({
        autofocus: false,
      }).modal("show");
      if(isEmpty(obj)) {
        IsResponseEmptyObj();
      } else {
        
        $("#ReportList").empty();
        // console.log(pic);
        jmlData = obj.length;
        
        for (a = 0; a < jmlData; a++) {
          
            var filelink = "<a target='_blank' href='../RND_Upload/Aktiva/PDFWriteoff/"+obj[a]["NamaFile"]+"'><i class='file pdf red icon'></i></a>";
            $("#TableReportList").find("tbody").append(
              "<tr>"+ 
              "<td width='20%'>"+obj[a]['no_wo']+"</td>"+
              "<td width='10%'>"+obj[a]['rev']+"</td>"+
              "<td width='30%'>"+obj[a]['note']+"</td>"+
              "<td width='20%'>"+obj[a]['Date']+"</td>"+
              "<td width='20%'>"+filelink+"</td>"+
              "</tr><tr></tr>"
            );
             
        }
        $("#FootFeedCheckList").empty();
          
       
        
      }
    }
});
// $("#PSCRejectSection").dropdown("clear");
});

$("#btnEditHeaderWo").on("click", function () {
  // var eid = $(this).attr("eid");
  // let encryption = new Encryption();
  var eidENC = Ucrypt.encrypt(no_wo, NonceValue);
  window.location.href = "./?link=aktivaEditWO&i=" + eidENC;
});

$("#btnPrintQR").on("click", function (e) {
  $.ajax({
    type: "POST",
    url: `../RND_BackEnd/backend_aktiva/createQR`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    data: {
      noWO: no_wo
    },
    cache: false,
    success: function (response) {
      var obj = JSON.parse(response);
      if (obj.status == false) {
        IsResponseFalse(obj.message);
      } else {
        var dataimage2 = "<img width='350' src='../RND_Upload/Aktiva/" + obj.message + "'>";
        // IsResponseTrue(obj.message);
        $("#FeedCheckList").empty();
        $(".xwinaddqr").modal('show');
        $("#TableFeedCheckList").find("tbody").append(
          "<tr>" +
          "<td width='100%'>" + dataimage2 + "</td>" +
          "</tr>"
        );
      }
    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
});

$("#btnHistoryPicWO").on("click", function (e) {
  $.ajax({
    type: "POST",
    url: `../RND_BackEnd/backend_aktiva/history-pic-wo`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    data: {
      noWO: no_wo
    },
    cache: false,
    success: function (response) {
      var obj = JSON.parse(response);
      if (obj.status == false) {
        IsResponseFalse(obj.message);
      } else {
        // var dataimage2 = "<img width='350' src='../RND_Upload/Aktiva/"+obj.message+"'>";
        // IsResponseTrue(obj.message);
        $("#FeedHistoryPIC").empty();
        $(".xwinhistorypic").modal('show');
        $("#TableHistoryPIC").find("tbody").append(
          "<tr>" +
          "<td width='50%'>" + obj.pic + "</td>" +
          "<td width='50%'>" + obj.pichistory + "</td>" +
          "</tr>"
        );
      }
    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
});

$(document).ready(function () {

  LoadSign();
  // ListWO();

  $('#btnUploadPDFWO').click(function(){
    $('.xwinuploadpdfWO').modal('show');
  });

  $('.btnCloseModal').click(function () {
    $('.xwindetailitem').modal('hide');
    $(".xwinaddheadof").modal('hide');
    $(".xwinaddheadofn").modal('hide');
    $('.xwinuploadpdfWO').modal('hide');
  });

  $("#EditHeader").on("click", function () {
    var nonceValue = decodeURIComponent(getCookie("nonceValue"));
    // let encryption = new Encryption();
    var eidupoENC = Ucrypt.encrypt(MKG_ID, nonceValue);
    window.location.href = "./?link=mkgreqnew&i=" + eidupoENC;
  });

  $("#btncancelwo").on("click", function () {
    $(".xwincancelwo").modal({
      autofocus: false,
    }).modal("show");
    // $("#inputPICMutasi").dropdown("clear");
  
  });
  
  $("#cancelwo").on("click", function () {
    var reason = $("#alasan_cancel").val();
    var dlink = Ucrypt.encrypt(no_wo, NonceValue);
    Swal.fire({
      title: "<h3>Yakin Cancel Approval Write Off ?</h3>",
      // text: nm_docupo,
      icon: "warning",
      confirmButtonText: "Ya",
      showCancelButton: true,
    }).then((result) => {
      if (result.value) {
        $.ajax({
          type: "POST",
          url: `../RND_BackEnd/backend_aktiva/cancel-wo`,
          headers: {
            user: vusrnm,
            token: vtoken,
          },
          data: {
            iditem: no_wo,
            reason : reason,
            dlink: 'aktivaSignApprovalMutasi&n=' + dlink,
            user: Udecrypt
          },
          cache: false,
          success: function (response) {
            var obj = JSON.parse(response);
            if (obj.status == false) {
              IsResponseFalse(obj.message);
            } else {
              IsResponseTrue(obj.message);
              window.location.href = "./?link=aktivaApprovalWriteoff";
            }
          },
          error: function () {
            if (LogoutProtect){
              window.location.href = "./?link=loclogout";
            } else {
              Swal.fire("Error", "Server tidak merespon, segera hubungi Administrator di ext. 3553 !","error" );
            }
          },
        });
      }
    });
  
  });

  $("#btnUploadPDF").click(function () {
    fileprop = $('#field-upload-file').prop("files")[0];
    var desc = $("#desc").val();
    noWO = no_wo;
    console.log(fileprop);

    var dataupload = new FormData();
    dataupload.append("file", fileprop);
    dataupload.append("no_wo",noWO);
    dataupload.append("desc",desc);
    dataupload.append("pic",Udecrypt);
    $.ajax({
      url: `../RND_BackEnd/backend_aktiva/uploadPDFWO`,
      headers: {
        user: vusrnm,
        token: vtoken,
      },
        type: 'POST',
        dataType: 'html',
        processData: false,
        contentType: false,
        cache: false,
        data: dataupload,
        success: function (response) {
            var obj = JSON.parse(response);
            if (obj.status == false) {
                Swal.fire({
                    text: obj.message,
                    timer: 1500,
                    icon: "warning",
                    showConfirmButton: false,
                });
            } else {
                Swal.fire('<h3>Success</h3>', '', 'success');
            }
        },
        error: function () {
            if (LogoutProtect) {
                window.location.href = "./?link=loclogout";
            } else {
                Swal.fire("Error", "Server tidak merespon, segera hubungi Administrator di ext. 3553 !", "error");
            }
        }
    });
    $("#modal-upload").modal('hide');
  });

  $('.CloseModal').click(function () {
    $(".ui.modal").modal("hide");
  });


  $('.ui.search.appset')
    .search({
      apiSettings: {
        url: '3_aktiva/_autocompletenik.php?q={query}'
      },
      fields: {
        results: 'data',
        title: 'name',
        description: 'nik'
      },
      minCharacters: 1,
      onSelect: function (response) {
        console.log(response.nik);
        $('#HeadOfPic').val(response.nik);
        $('#NIKHO').val(response.nik);
        // LoadDataHRIS();
      },
    });

  $('.ui.dropdown').dropdown();


});