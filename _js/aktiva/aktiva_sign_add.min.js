const NonceValue = "rdsystem2020"; 
const LogoutProtect = false;

const ColorSignNo = "#00139f";
const ColorOwner = "#00139f";
const BgColorOwner = "#eff0ff";
const ColorRelease = "#505050";
const ColorCancel = "#be0000";
const ColorLock = "#860954";
const BgColorLock = "#f3ebeb";

var restlocactiva = decodeURIComponent(getCookie("restlocactiva"));
var restlocms = decodeURIComponent(getCookie("restlocms"));
var vusrnm = getCookie("usrnm");
var vtoken = getCookie("token");
let Ucrypt = new Encryption();
var Udecrypt = Ucrypt.decrypt(EncU, NonceValue);
var Jdecrypt = Ucrypt.decrypt(EncJ, NonceValue);
var Sdecrypt = Ucrypt.decrypt(EncS, NonceValue);


function LoadDataAktiva() {
  $.ajax({
    type: "POST",
    url: `${restlocactiva}aktiva/load-aktiva/` + id_item,
    headers: {
      user: vusrnm,
      token: vtoken
    },
    cache: false,
    success: function (data) {
      var obj = JSON.parse(data);
      $("#JenisAktiva").dropdown("set selected", obj.jenis);
      $("#MerkAktiva").val(obj.merk);
      $("#DescAktiva").val(obj.description);
      $("#NoEquipAktiva").val(obj.no_equipment);
      $("#NoAssetAktiva").val(obj.asset + obj.subnumber);
      $("#adminCC").dropdown("set selected", obj.cost_center);
      $("#MatNumAktiva").val(obj.material_number);
      $("#NIKAktiva").val(obj.nik);
      $("#PlantAktiva").val();
      $("#PICAktiva").val(obj.peminta);
      $("#BagianAktiva").val(obj.bagian);
      $("#VendorAktiva").val(obj.vendor);
      $("#VendorMatNumAktiva").val(obj.vendor_material_number);
      $("#NamaHistoryAktiva").val(obj.pic_history);
      $("#NoSeriAktiva").val();
      $("#BagHistoryAktiva").val(obj.bagian_history);
      $("#JumlahAktiva").val(obj.qty);
      $("#golonganItem").dropdown("set selected", obj.golongan);
      $("#BaseUnitAktiva").val(obj.satuan);
      $("#statusBarang").val();
      $("#kodeStatus").dropdown("set selected", obj.kode_status);
      $("#NOGRAktiva").val(obj.gr);
      $("#DateGRAktiva").val(obj.tgl_gr);
      $("#DateStatusAktiva").val();
      $("#PriceAktiva").val(obj.harga);
      $("#kalibrasiItem").dropdown("set selected", obj.kalibrasi);
      $("#BuktiAktiva").val(obj.no_bukti);
      $("#matauang").dropdown("set selected", obj.currency);
      $("#NoteAktiva").val(obj.note);
      $("#GRYearAktiva").val(obj.gr_year);
      $("#GRLineAktiva").val(obj.gr_line);

    },
    error: function () {
      IsTimeOut(LogoutProtect);
    }
  });
}


function LoadSign() {
  $.ajax({
    type: "POST",
    url: `${restlocactiva}loadSign`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    data: {
      iditem: id_item
    },
    cache: false,
    success: function (data) {
      var obj = JSON.parse(data);
      console.log(obj);
      if (obj.status === false) {
        // IsResponseFalse(obj.message);
        $("#NoSignMsg").show();
      } else {
        $('#GenAdmin').text(obj.admin);
        $('#GenAdminJabatan').text(obj.admin_jabatan);
        $('#GenAdminBagian').text(obj.bagian_admin);
        if (Udecrypt === obj.admin) {
          if (obj.admin_sign === "SIGNED") {
            $('#DateSignAdmin').text(obj.datesign_admin);
            $('#BtnSignAdmin').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Signed" data-position="top left">SIGNED</a>');
          } else {
            $('#BtnSignAdmin').html('<a class="ui tiny bottom green attached button signadmin" asid="MD1" data-tooltip="Sign setelah melengkapi data" data-position="top left">SIGN</a>');
          }
        } else {
          if (obj.admin_sign === "SIGNED") {
            $('#DateSignAdmin').text(obj.datesign_admin);
            $('#BtnSignAdmin').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Signed" data-position="top left">SIGNED</a>');
          } else {
            if (obj.rnd_bagian_admin === Sdecrypt && Jdecrypt === "HEAD OF") {
              $('#BtnSignAdmin').html('<a class="ui tiny bottom green attached button signadmin" asid="MD1" data-tooltip="Sign setelah melengkapi data" data-position="top left">SIGN</a>');
            } else {
              $('#BtnSignAdmin').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">SIGN</a>');
            }
          }
        }

        if (obj.pic_name) {
          $('#Pic').text(obj.pic_name);
          $('#PicJabatan').text(obj.pic_jabatan);
          $('#PicBagian').text(obj.bagian_pic);
          if (obj.admin_sign === "SIGNED") {
            if (Udecrypt === obj.pic_name) {
              if (obj.pic_sign === "SIGNED") {
                $('#DateSignPic').text(obj.datesign_pic);
                $('#BtnSignPic').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">CONFIRMED</a>');
              } else {
                $('#BtnSignPic').html('<div class="ui tiny two bottom attached buttons"><div class="ui green button signpic" asid="app1" data-tooltip="Confirm Activa" data-position="top left">Confirm</div><div class="ui redreject button rejectapp" asid="PIC" data-tooltip="Reject Approval" data-position="top left">Reject</div></div>');
                EnSign();
              }
            } else {
              if (obj.pic_sign === "SIGNED") {
                $('#DateSignPic').text(obj.datesign_pic);
                $('#BtnSignPic').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Confirmed" data-position="top left">CONFIRMED</a>');
              } else {
                if (obj.rnd_bagian_pic === Sdecrypt && Jdecrypt === "HEAD OF") {
                  $('#BtnSignPic').html('<div class="ui tiny two bottom attached buttons"><div class="ui green button signpic" asid="app1" data-tooltip="Confirm Activa" data-position="top left">Confirm</div><div class="ui redreject button rejectapp" asid="PIC" data-tooltip="RejectApproval" data-position="top left">Reject</div></div>');
                  EnSign();
                } else {
                  $('#BtnSignPic').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">SIGN</a>');
                }
              }
            }
          } else {
            if (obj.pic_sign === "SIGNED") {
              $('#DateSignPic').text(obj.datesign_pic);
              $('#BtnSignPic').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Confirmed" data-position="top left">CONFIRMED</a>');
            } else {
              $('#BtnSignPic').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">CONFIRM</a>');
            }
          }

        }

        if (obj.head_of_pic) {
          $('#HeadOf').text(obj.head_of_pic);
          $('#HeadOfJabatan').text(obj.head_of_jabatan);
          $('#HeadOfBagian').text(obj.bagian_head_of_pic);
          if (obj.pic_sign === "SIGNED") {
            if (Udecrypt === obj.head_of_pic) {
              if (obj.head_of_pic_sign === "SIGNED") {
                $('#DateSignHeadOf').text(obj.datesign_head_of);
                $('#BtnSignHeadOf').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">APPROVED</a>');
              } else {
                $('#BtnSignHeadOf').html('<div class="ui tiny two bottom attached buttons"><div class="ui green button signho" asid="app1" data-tooltip="Confirm Activa" data-position="top left">APPROVE</div><div class="ui redreject button rejectapp" asid="Head of" data-tooltip="Reject Approval" data-position="top left">Reject</div></div>');
                EnSign();
              }
            } else {
              if (obj.head_of_pic_sign === "SIGNED") {
                $('#DateSignHeadOf').text(obj.datesign_head_of);
                $('#BtnSignHeadOf').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Confirmed" data-position="top left">APPROVED</a>');
              } else {
                if (obj.rnd_bagian_head_of === Sdecrypt && Jdecrypt === "HEAD OF") {
                  $('#BtnSignHeadOf').html('<div class="ui tiny two bottom attached buttons"><div class="ui green button signho" asid="app1" data-tooltip="Confirm Activa" data-position="top left">APPROVE</div><div class="ui redreject button rejectapp" asid="Head of" data-tooltip="Reject Approval" data-position="top left">Reject</div></div>');
                  EnSign();
                } else {
                  $('#BtnSignHeadOf').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">APPROVE</a>');
                }
              }
            }
          } else {
            if (obj.head_of_sign === "SIGNED") {
              $('#DateSignHeadOf').text(obj.datesign_head_of);
              $('#BtnSignHeadOf').html('<a class="ui tiny bottom basic green attached button" asid="MD1" data-tooltip="Confirmed" data-position="top left">APPROVED</a>');
            } else {
              $('#BtnSignHeadOf').html('<a class="ui tiny disabled bottom attached button" asid="MD1" data-tooltip="Masih dalam proses" data-position="top left">APPROVE</a>');
            }
          }

        }



        SignGenAdmin();
        SignPIC();
        SignHo();
        // SignHoDQAReg();
        // SignPicDQAReg();
        RejectApp();

      }


    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
}

function SignGenAdmin() {
  $(".signadmin").on("click", function () {
    var dlink = Ucrypt.encrypt(id_item, NonceValue);
    Swal.fire({
      title: "<h3>Sign Permintaan Aktiva ini ?</h3>",
      confirmButtonText: "Ya",
      showCancelButton: true,
    }).then((result) => {
      if (result.value) {
        $.ajax({
          type: "POST",
          url: `../RND_BackEnd/backend_aktiva/sign-genadmin`,
          headers: {
            user: vusrnm,
            token: vtoken,
          },
          data: {
            iditem: id_item,
            dlink: 'aktivaSignAdd&n=' + dlink,
            user: Udecrypt
          },
          cache: false,
          success: function (response) {
            var obj = JSON.parse(response);
            if (obj.status == false) {
              IsResponseFalse(obj.message);
            } else {
              IsResponseTrue(obj.message);
              LoadSign();
            }
          },
          error: function () {
            IsTimeOut(LogoutProtect);
          },
        });
      }
    });
  });
}


function SignPIC() {
  $(".signpic").on("click", function () {
    $(".xwinaddheadof").modal({
      autofocus: false,
    }).modal("show");
    $("#inputPICMutasi").dropdown("clear");

  });
}

$('.CloseModal').click(function () {
  $(".ui.modal").modal("hide");
});

$("#SendKalibrasi").on("click", function () {
  $(".xwinsendemailkalibrasi").modal({
    autofocus: false,
  }).modal("show");
  // $("#inputPICMutasi").dropdown("clear");

});

$("#perluFile").on('change', function(){
  var perlu = $("#perluFile").val();
  console.log(perlu);
  if(perlu === "No"){
    $("#upload-file").hide();
    $("#note-file").hide();
  }else if(perlu === "Yes"){
    $("#upload-file").show();
    $("#note-file").show();
  }
    
});

$('#btnAddtoDB').on('click', function () {
  data = [{
    // IdMkg         : IdEdit,
    JnsAct: $("#JenisAktiva").val(),
    MrkAct: $("#MerkAktiva").val(),
    DscAct: $("#DescAktiva").val(),
    EqpAct: $("#NoEquipAktiva").val(),
    AstAct: $("#NoAssetAktiva").val(),
    CstAct: $("#adminCC").val(),
    MatAct: $("#MatNumAktiva").val(),
    NikAct: $("#NIKAktiva").val(),
    Plant: $("#PlantAktiva").val(),
    user: Udecrypt,
    PicAct: $("#PICAktiva").val(),
    DeptAct: $("#DeptAktiva").val(),
    VendAct: $("#VendorAktiva").val(),
    VMatAct: $("#VendorMatNumAktiva").val(),
    NamHAct: $("#NamaHistoryAktiva").val(),
    DeptHAct: $("#DeptHistoryAktiva").val(),
    SeriAct: $("#NoSeriAktiva").val(),
    BagHAct: $("#BagHistoryAktiva").val(),
    BagAct: $("#BagianAktiva").val(),
    JmlAct: $("#JumlahAktiva").val(),
    GolAct: $("#golonganItem").val(),
    BaseAct: $("#BaseUnitAktiva").val(),
    StBrAct: $("#statusBarang").val(),
    KDStAct: $("#kodeStatus").val(),
    NoGRAct: $("#NOGRAktiva").val(),
    DtGrAct: $("#DateGRAktiva").val(),
    GRyrAct: $("#GRYearAktiva").val(),
    PrceAct: $("#PriceAktiva").val(),
    KalbAct: $("#kalibrasiItem").val(),
    GRLnAct: $("#GRLineAktiva").val(),
    CurrAct: $("#matauang").val(),
    NoteAct: $("#NoteAktiva").val(),
    action: "UpdateActiva",
  }, ];
  $.ajax({
    type: "POST",
    url: `${restlocactiva}CreateItemOutstanding/` + id_item,
    headers: {
      user: vusrnm,
      token: vtoken
    },
    data: {
      data: data
    },
    cache: false,
    success: function (response) {
      var obj = JSON.parse(response);
      if (isEmpty(obj)) {
        IsResponseEmptyObj();
      } else if (obj) {
        if (obj.status == false) {
          IsResponseFalse(obj.message);
        } else {
          IsResponseTrue(obj.message);
          window.location.href = "./?link=aktiva";
        }
      } else {
        Swal.fire('Error', 'Ada kendal di koneksi/database, data tidak tersimpan !', 'error')
      }
    },
    error: function () {
      if (LogoutProtect) {
        window.location.href = "./?link=loclogout";
      } else {
        Swal.fire("Error", "Server tidak merespon, segera hubungi Administrator di ext. 3553 !", "error");
      }
    },
  });
});

$("#btnSaveKalibrasi").click(function () {
  fileprop = $('#field-upload-file').prop("files")[0];
  var desc = $("#desc").val();
  var perlu = $("#perluFile").val();
  id = id_item;
  console.log(fileprop);

  var dataupload = new FormData();
  dataupload.append("file", fileprop);
  dataupload.append("id",id);
  dataupload.append("desc",desc);
  dataupload.append("perluFile",perlu);
  dataupload.append("pic",Udecrypt);

  $.ajax({
    url: `../RND_BackEnd/backend_aktiva/sendEmailKalibrasiAktiva`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
      type: 'POST',
      dataType: 'html',
      processData: false,
      contentType: false,
      cache: false,
      data: dataupload,
      success: function (response) {
          var obj = JSON.parse(response);
          if (obj.status == false) {
              IsResponseFalse(obj.message);
          } else {
              IsResponseTrue(obj.message);
          }
      },
      error: function () {
          if (LogoutProtect) {
              window.location.href = "./?link=loclogout";
          } else {
            IsResponseEmptyObj();
          }
      }
  });
  $("#xwinsendemailkalibrasi").modal('hide');
});

$("#SaveDataImg").on("click", function () {
  fileprop = $('#uploadImg').prop("files")[0];
  id = id_item;

  var dataupload = new FormData();
  dataupload.append("file", fileprop);
  dataupload.append("id",id);
  dataupload.append("pic",Udecrypt);
  $.ajax({
    type: "POST",
    url: `../RND_BackEnd/backend_aktiva/upload-img`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    dataType: 'html',
    processData: false,
    contentType: false,
    cache: false,
    data: dataupload,
    success: function (response) {
      var obj = JSON.parse(response);
      if (obj.status == false) {
        IsResponseFalse(obj.message);
      } else {
        IsResponseTrue(obj.message);
        LoadSign();
        $(".xwinaddheadof").modal("hide");
        window.location.reload();
      }
    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
});

// function SignPic(){
$("#SaveDataHO").on("click", function () {
  var ho = $("#HeadOfPic").val();
  var dlink = Ucrypt.encrypt(id_item, NonceValue);
  $.ajax({
    type: "POST",
    url: `../RND_BackEnd/backend_aktiva/sign-pic`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    data: {
      ho: ho,
      iditem: id_item,
      dlink: 'aktivaSignAdd&n=' + dlink,
      user: Udecrypt
    },
    cache: false,
    success: function (response) {
      var obj = JSON.parse(response);
      if (obj.status == false) {
        IsResponseFalse(obj.message);
      } else {
        IsResponseTrue(obj.message);
        LoadSign();
        $(".xwinaddheadof").modal("hide");
      }
    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
});
// }



function EnSign() {
  $('.ensign').click(function () {
    // var rl = $(this).attr('rl');
    // var nm = $(this).attr('nm');
    // var hc = $(this).attr('hc');
    $(".xwinaddheadof").modal({
      autofocus: false,
    }).modal("show");
    $("#HeadOfPic").dropdown("clear");
  });
}

function SignHo() {
  $(".signho").on("click", function () {
    var dlink = Ucrypt.encrypt(id_item, NonceValue);
    Swal.fire({
      title: "<h3>Approve Permintaan Aktiva ini ?</h3>",
      confirmButtonText: "Ya",
      showCancelButton: true,
    }).then((result) => {
      if (result.value) {
        $.ajax({
          type: "POST",
          url: `../RND_BackEnd/backend_aktiva/sign-ho`,
          headers: {
            user: vusrnm,
            token: vtoken,
          },
          data: {
            iditem: id_item,
            dlink: 'aktivaSignAdd&n=' + dlink,
            user: Udecrypt
          },
          cache: false,
          success: function (response) {
            var obj = JSON.parse(response);
            if (obj.status == false) {
              IsResponseFalse(obj.message);
            } else {
              IsResponseTrue(obj.message);
              LoadSign();
            }
          },
          error: function () {
            IsTimeOut(LogoutProtect);
          },
        });
      }
    });
  });
}

function RejectApp() {
  $(".rejectapp").on("click", function () {
    $(".xwinrejectapp").modal('show');
    var SignAs = $(this).attr("asid");
    $("#asid").val(SignAs);
  });
}

$("#RejectApp").on("click", function (e) {
  var reason = $("#rejectreason").val();
  var asid = $("#asid").val();
  var dlink = Ucrypt.encrypt(id_item, NonceValue);
  Swal.fire({
    title: "<h3>Reject Permintaan Approval Aktiva ini ?</h3>",
    text: reason,
    icon: "warning",
    confirmButtonText: "Reject!",
    showCancelButton: true,
  }).then((result) => {
    if (result.value) {
      $.ajax({
        type: "POST",
        url: `${restlocactiva}reject_approval`,
        headers: {
          user: vusrnm,
          token: vtoken,
        },
        data: {
          id_item: id_item,
          reason: reason,
          asid: asid,
          dlink: 'aktivaSignAdd&n=' + dlink,
          nama: Udecrypt
        },
        cache: false,
        success: function (response) {
          var obj = JSON.parse(response);
          if (obj.status == false) {
            IsResponseFalse(obj.message);
          } else {
            IsResponseTrue(obj.message);
            location.reload();
          }
        },
        error: function () {
          if (LogoutProtect) {
            window.location.href = "./?link=loclogout";
          } else {
            Swal.fire("Error", "Server tidak merespon, segera hubungi Administrator di ext. 3553 !", "error");
          }
        },
      });
    }
  });
});

$("#btnEditHeaderAdd").on("click", function () {
  // var eid = $(this).attr("eid");
  // let encryption = new Encryption();
  var eidENC = Ucrypt.encrypt(id_item, NonceValue);
  window.location.href = "./?link=aktivaEditItem&i=" + eidENC;
});



$("#btnPrintQR").on("click", function (e) {
  $.ajax({
    type: "POST",
    url: `../RND_BackEnd/backend_aktiva/createQR`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    data: {
      iditem: id_item
    },
    cache: false,
    success: function (response) {
      var obj = JSON.parse(response);
      if (obj.status == false) {
        IsResponseFalse(obj.message);
      } else {
        var dataimage2 = "<img width='350' src='../RND_Upload/Aktiva/" + obj.message + "'>";
        // IsResponseTrue(obj.message);
        $("#FeedCheckList").empty();
        $(".xwinaddqr").modal('show');
        $("#TableFeedCheckList").find("tbody").append(
          "<tr>" +
          "<td width='70%' style = 'text-align:center'>" + dataimage2 + "<br><h2>"+obj.nomor_aktiva +"</h2></td>" +
          // "<td>"+obj.nomor_aktiva+"</td>"+
          "</tr>"
        );
      }
    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
});


$("#HistoryPic").on("click", function (e) {
  $.ajax({
    type: "POST",
    url: `../RND_BackEnd/backend_aktiva/history-pic`,
    headers: {
      user: vusrnm,
      token: vtoken,
    },
    data: {
      iditem: id_item
    },
    cache: false,
    success: function (response) {
      var obj = JSON.parse(response);
      if (obj.status == false) {
        IsResponseFalse(obj.message);
      } else {
        // var dataimage2 = "<img width='350' src='../RND_Upload/Aktiva/"+obj.message+"'>";
        // IsResponseTrue(obj.message);
        $("#FeedHistoryPIC").empty();
        $(".xwinhistorypic").modal('show');
        $("#TableHistoryPIC").find("tbody").append(
          "<tr>" +
          "<td width='50%'>" + obj.pic + "</td>" +
          "<td width='50%'>" + obj.pichistory + "</td>" +
          "</tr>"
        );
      }
    },
    error: function () {
      IsTimeOut(LogoutProtect);
    },
  });
});

$(document).ready(function () {

  //Load dokumen upload upo
  LoadSign();
  LoadDataAktiva();

  $('#tabmkglist').on('click', function () {
    window.location.href = "./?link=mkgindex";
  });

  $('#userguidemkg').on('click', function () {
    window.location.href = "./?link=guidemkg";
  });



  $('#HeaderButtonSave').on('click', function () {
    window.location.href = "./?link=mkgindex";
  });

  $('#HeaderButtonBack').on('click', function () {
    window.location.href = "./?link=mkgindex";
  });

  $("#EditHeader").on("click", function () {
    var nonceValue = decodeURIComponent(getCookie("nonceValue"));
    // let encryption = new Encryption();
    var eidupoENC = Ucrypt.encrypt(MKG_ID, nonceValue);
    window.location.href = "./?link=mkgreqnew&i=" + eidupoENC;
  });

  $("#btnUploadImg").on("click", function () {
    $(".xwinaddimg").modal('show');
  });

  $("#EditNoMKG").on("click", function () {
    $(".xwinaddmkgnumber").modal('show');
  });

  $("#UploadNewDoc").click(function () {
    $(".uploaddoc").modal('show');
  });

  $(".edititem").click(function () {
    $(".edititempo").modal('show');
  });

  $("#CustFeedback").click(function () {
    $(".xwinaddcustfeedback").modal('show');
  });

  // $(".CancelData").on("click", function (e) {
  //   $(".xwinrejectapp").modal("hide");
  //   $(".xwinaddheadof").modal("hide");
  //   $(".xwinaddqr").modal("hide");
  //   $(".xwinhistorypic").modal("hide");
  //   $(".rejectnego").modal("hide");
  //   $(".viewdetail").modal("hide");
  // });

  $('[data-toggle="datepicker"]').datepicker({
    format: 'yyyy-mm-dd',
    autoHide: true,
    weekStart: 1
  });

  $('.ui.search.appset')
    .search({
      apiSettings: {
        url: '3_aktiva/_autocompletenik.php?q={query}'
      },
      fields: {
        results: 'data',
        title: 'nik',
        description: 'name'
      },
      minCharacters: 1,
      onSelect: function (response) {
        console.log(response.nik);
        $('#PICAktiva').val(response.name);
        $('#NIKAktiva').val(response.email);
        $('#BagianAktiva').val(response.ou_desc);
        // LoadDataHRIS();
      },
    });

    $(".ui.search.vendor").search({
      minCharacters: 3,
      apiSettings: {
        url: `${restlocms}search-vendor?q={query}`,
      },
      fields: {
        results: "data",
        title: "id",
        description: "desc",
      }
  });

  $('.ui.dropdown').dropdown();

});